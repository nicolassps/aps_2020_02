<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<f:facet name="first">
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="viewport"
			content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
	</f:facet>
	<title>IESGF</title>
	<link rel="shortcut icon"
		href="#{facesContext.externalContext.request.contextPath}/resources/imagens/logo_ies.ico" />

	<h:outputScript name="js/ripple-effect.js" library="rio-layout" />
	<h:outputScript name="js/perfect-scrollbar.js" library="rio-layout" />
	<h:outputScript name="js/layout.js" library="rio-layout" />
</h:head>

<h:body>
	<div class="pn-middle">
		<form id="form" action="/login" method="post">
			<h:panelGrid columns="1" style="width: 100%">

				<p:column>
					<p:graphicImage height="100" library="imagens" name="logo_ies.png"></p:graphicImage>
				</p:column>

				<p:separator />

				<p:column>
					<p:inputText type="text" id="username" name="username"
						placeholder="Login"></p:inputText>
				</p:column>

				<p:column>
					<p:inputText type="password" id="password" name="password"
						placeholder="Senha"></p:inputText>
				</p:column>

				<p:column>
					<h:panelGrid columns="2" styleClass="tb-botoes-login">
						<p:column>
							<h:commandButton styleClass="btn-submit" value="Enviar"></h:commandButton>
						</p:column>


						<p:column>
							<a class="btn-esqueci" onclick="PF('dgResetSenha').show()">Esqueci minha senha</a>
						</p:column>
					</h:panelGrid>
				</p:column>

				<p:column>
					<p:link outcome="registro.xhtml" value="Registrar-se" />
				</p:column>

			</h:panelGrid>
		</form>
	</div>

	<p:dialog id="dgResetSenha" widgetVar="dgResetSenha" header="Resetar a senha">
		<h:form id="frmResetSenha">
			<h:panelGrid columns="1" style="width: 100%">

				<p:column>
					<p:inputText value="#{alteracaoSenhaController.usuario.usrLogin}"
						style="width:370px" required="false"
						requiredMessage="Informe o login" type="text" id="userlogin"
						placeholder="Login">
						<p:ajax event="blur" listener="#{alteracaoSenhaController.buscaUsuario()}" update="frmResetSenha" />
					</p:inputText>
				</p:column>

				<p:column>
					<p:inputText
						value="#{alteracaoSenhaController.usuario.perguntaSeguranca.pesPergunta}"
						disabled="true" style="width:370px" required="true"></p:inputText>
				</p:column>

				<p:column>
					<p:inputText type="text" id="resposta" style="width:370px"
						required="false" requiredMessage="Informe a resposta de segurança"
						value="#{alteracaoSenhaController.usuario.usrRespostaSeguranca}"
						placeholder="Resposta de segurança"></p:inputText>
				</p:column>

				<p:column
					rendered="#{alteracaoSenhaController.usuario.usrCodigo > 0}">
					<p:inputText value="#{alteracaoSenhaController.usuario.usrSenha}"
						style="width:370px" required="false"
						requiredMessage="Confira a senha inserida" type="password"
						id="password" placeholder="Senha"></p:inputText>
				</p:column>

				<p:column
					rendered="#{alteracaoSenhaController.usuario.usrCodigo > 0}">
					<p:inputText value="#{alteracaoSenhaController.confirmacaoSenha}"
						style="width:370px" required="false"
						requiredMessage="Confira a senha inserida" type="password"
						id="repeatPassword" placeholder="Repetir Senha"></p:inputText>
				</p:column>

				<p:column>
					<p:commandButton styleClass="btn-submit" value="Trocar a senha" action="#{alteracaoSenhaController.salvaSenhaNova()}"></p:commandButton>
				</p:column>
			</h:panelGrid>
			
			<p:growl id="msgReset" autoUpdate="true" sticky="true" showDetail="true"></p:growl>
		</h:form>
	</p:dialog>

	<h:outputStylesheet name="css/core-layout.css" library="rio-layout" />
	<h:outputStylesheet name="css/animate.css" library="rio-layout" />
	<h:outputStylesheet name="css/rio-font.css" library="rio-layout" />
	<h:outputStylesheet name="css/ripple-effect.css" library="rio-layout" />
	<h:outputStylesheet name="css/font-awesome.css" library="rio-layout" />
	<h:outputStylesheet name="css/rio-layout.css" library="rio-layout" />

	<h:outputStylesheet name="login.css" library="css" />
	<h:outputStylesheet name="var.css" library="css" />
</h:body>
</html>